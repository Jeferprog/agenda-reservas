<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Agenda Virtual ‚Äî Cresol Cooperar (Firestore)</title>
<style>
  /* Visual similar ao seu projeto */
  body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f5f7fa;color:#222}
  header{background:linear-gradient(90deg,#ff7a00,#c0c0c0);color:#fff;padding:16px;text-align:center;font-size:20px;font-weight:700}
  .container{display:flex;gap:18px;padding:18px}
  .sidebar{width:300px;background:#fff;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  .calendar{flex:1;background:#fff;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  .section-title{font-weight:700;margin-bottom:8px}
  .small-input{width:90%;padding:8px;border-radius:8px;border:1px solid #ddd;box-sizing:border-box}
  .row{display:flex;gap:8px;align-items:center}
  .btn{padding:8px 10px;border-radius:8px;border:0;background:#ff7a00;color:#fff;cursor:pointer;font-weight:700}
  .btn-muted{background:#eee;color:#333}
  .calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
  .weekday{text-align:center;font-size:12px;color:#6b7280}
  .day{background:#fff;border:1px solid #eef2f6;border-radius:8px;padding:8px;min-height:92px;cursor:pointer;position:relative}
  .day-num{font-weight:700}
  .muted{color:#6b7280;font-size:13px}
  .multi-reservations{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
  .reservation-label{padding:6px 8px;border-radius:8px;color:#fff;font-weight:700;font-size:12px}
  /* modal */
  .modal-bg{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:60}
  .modal{background:#fff;padding:16px;border-radius:10px;width:420px;max-width:94%}
  label{display:block;margin-top:8px;font-weight:600;font-size:14px}
  select,input[type="time"],input[type="text"]{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd;box-sizing:border-box}
  .modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
  .icon-btn{background:transparent;border:0;cursor:pointer;padding:6px;border-radius:6px}
  .list-row{display:flex;justify-content:space-between;align-items:center;padding:6px;border-radius:6px;border:1px solid #f0f0f0;margin-bottom:8px}
  .color-box{width:28px;height:22px;border-radius:6px;border:1px solid rgba(0,0,0,0.06)}
  .status { font-size:13px; color:#666; margin-top:8px; }
  footer.note { position: fixed; bottom: 0; width: 100%; text-align: center; padding:6px 0; background:transparent; font-size:12px; color:#666; }
</style>
</head>
<body>
<header>Agenda Virtual ‚Äî Cresol Cooperar (Firestore)</header>

<div class="container">
  <aside class="sidebar">
    <div>
      <div class="section-title">Cadastrar usu√°rio</div>
      <div class="muted">Digite o nome do usu√°rio e selecione uma cor para represent√°-lo</div>
      <input id="newUserName" class="small-input" placeholder="Nome do usu√°rio" />
      <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
        <input id="newUserColor" type="color" style="width:64px;height:36px;border-radius:8px;border:1px solid #ddd;padding:0" value="#ff7a00" />
        <button id="addUserBtn" class="btn">Adicionar</button>
        <button id="manageUsersBtn" class="btn-muted" style="padding:6px 8px">Gerenciar</button>
      </div>

      <hr style="margin:12px 0">

      <div class="section-title">Cadastrar Ag√™ncia</div>
      <input id="newPlaceName" class="small-input" placeholder="Nome da Ag√™ncia" />
      <div style="display:flex;gap:8px;margin-top:8px">
        <button id="addPlaceBtn" class="btn">Cadastrar</button>
        <button id="managePlacesBtn" class="btn-muted" style="padding:6px 8px">Gerenciar</button>
      </div>
      <div style="margin-top:12px" class="muted">Observa√ß√£o: Usu√°rios e Ag√™ncias cadastrados aparecem ao selecionar um dia.</div>
      <div id="connectionStatus" class="status"></div>
    </div>
  </aside>

  <main class="calendar">
    <div class="calendar-header">
      <div style="display:flex;gap:8px;align-items:center">
        <button id="prevMonth" class="btn">‚óÄ</button>
        <div id="monthLabel" style="font-weight:800"></div>
        <button id="nextMonth" class="btn">‚ñ∂</button>
      </div>
      <div class="muted">Clique em um dia para reservar ou editar reservas</div>
    </div>

    <div class="calendar-grid" id="calendarGrid"></div>
  </main>
</div>

<!-- Reservation modal -->
<div class="modal-bg" id="modalBg">
  <div class="modal" role="dialog" aria-modal="true">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:900" id="modalDateTitle">Reservar</div>
      <button id="closeModal" class="icon-btn">‚úï</button>
    </div>

    <label>Usu√°rio</label>
    <select id="modalUserSelect"></select>

    <label>Local</label>
    <select id="modalPlaceSelect"></select>

    <label>Per√≠odo</label>
    <div style="display:flex;gap:8px;margin-top:6px">
      <label><input type="radio" name="period" value="dia"> Dia todo</label>
      <label><input type="radio" name="period" value="manha"> Manh√£</label>
      <label><input type="radio" name="period" value="tarde"> Tarde</label>
      <label><input type="radio" name="period" value="horario"> Hor√°rio</label>
    </div>

    <div id="timeBox" style="display:none;margin-top:8px">
      <input type="time" id="timeStart" />
      <div style="height:6px"></div>
      <input type="time" id="timeEnd" />
    </div>

    <div id="existingReservationsBox" style="margin-top:10px"></div>

    <div class="modal-actions">
      <button id="deleteResBtn" class="btn" style="background:#c0392b;display:none">Excluir</button>
      <button id="saveResBtn" class="btn">Salvar</button>
      <button id="cancelResBtn" class="btn" style="background:#aaa">Cancelar</button>
    </div>
  </div>
</div>

<!-- Manage modals -->
<div class="modal-bg" id="manageUsersModal" style="display:none">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:900">Gerenciar usu√°rios</div>
      <button class="icon-btn" id="closeManageUsers">‚úï</button>
    </div>
    <div id="manageUsersList" style="margin-top:12px"></div>
  </div>
</div>

<div class="modal-bg" id="managePlacesModal" style="display:none">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div style="font-weight:900">Gerenciar Ag√™ncias</div>
      <button class="icon-btn" id="closeManagePlaces">‚úï</button>
    </div>
    <div id="managePlacesList" style="margin-top:12px"></div>
  </div>
</div>

<footer class="note">Desenvolvido por: Jeferson Deimling</footer>

<!-- Firebase compat SDKs (works with plain <script> usage) -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

<script>
/* --------- FIREBASE CONFIG (colecido do que voc√™ enviou) --------- */
const firebaseConfig = {
  apiKey: "AIzaSyD-PZZ9NPKedeicRxaPPdCLSI10xEYwHKU",
  authDomain: "agenda-compartilhada-d4280.firebaseapp.com",
  projectId: "agenda-compartilhada-d4280",
  storageBucket: "agenda-compartilhada-d4280.firebasestorage.app",
  messagingSenderId: "299191431650",
  appId: "1:299191431650:web:95d3d2dd5c9f952e0549bb",
  measurementId: "G-Q8MXG3F41C"
};
/* ----------------------------------------------------------------- */

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* Local caches */
let users = {};       // {name:{color}}
let places = {};      // {name:{}}
let reservations = {}; // {dateKey:[{id,user,place,period}]}

/* UI state */
let viewDate = new Date();
let selectedDayKey = null;
let editingResId = null;

/* DOM refs */
const connectionStatus = document.getElementById('connectionStatus');
const modalBg = document.getElementById('modalBg');
const modalUserSelect = document.getElementById('modalUserSelect');
const modalPlaceSelect = document.getElementById('modalPlaceSelect');
const existingBox = document.getElementById('existingReservationsBox');
const manageUsersModal = document.getElementById('manageUsersModal');
const managePlacesModal = document.getElementById('managePlacesModal');

/* Helpers */
function formatKey(d){ return `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`; }
function uid(){ return `${Date.now()}-${Math.random().toString(36).slice(2,7)}`; }

/* Real-time listeners */
db.collection('users').onSnapshot(snap => {
  users = {};
  snap.forEach(doc => users[doc.id] = doc.data());
  connectionStatus.textContent = 'Usu√°rios carregados';
}, err => connectionStatus.textContent = 'Erro usu√°rios: ' + err.message);

db.collection('places').onSnapshot(snap => {
  places = {};
  snap.forEach(doc => places[doc.id] = doc.data());
  connectionStatus.textContent = 'Lugares carregados';
}, err => connectionStatus.textContent = 'Erro lugares: ' + err.message);

db.collection('reservations').onSnapshot(snap => {
  reservations = {};
  snap.forEach(doc => reservations[doc.id] = doc.data().items || []);
  connectionStatus.textContent = 'Reservas carregadas';
  renderCalendar();
}, err => connectionStatus.textContent = 'Erro reservas: ' + err.message);

/* Render calendar */
function renderCalendar(){
  const grid = document.getElementById('calendarGrid');
  grid.innerHTML = '';

  const weekNames = ['Dom','Seg','Ter','Qua','Qui','Sex','S√°b'];
  for(let i=0;i<7;i++){
    const wd = document.createElement('div'); wd.className='weekday'; wd.textContent = weekNames[i];
    grid.appendChild(wd);
  }

  const y = viewDate.getFullYear(), m = viewDate.getMonth();
  document.getElementById('monthLabel').textContent = viewDate.toLocaleString('pt-BR',{month:'long', year:'numeric'});

  const first = new Date(y,m,1).getDay();
  const total = new Date(y,m+1,0).getDate();

  for(let i=0;i<first;i++) grid.appendChild(document.createElement('div'));

  for(let d=1; d<=total; d++){
    const dateObj = new Date(y,m,d);
    const key = formatKey(dateObj);
    const dayDiv = document.createElement('div'); dayDiv.className='day';
    const top = document.createElement('div'); top.style.display='flex'; top.style.justifyContent='space-between';
    const dn = document.createElement('div'); dn.className='day-num'; dn.textContent=d;
    top.appendChild(dn);
    dayDiv.appendChild(top);

    if(reservations[key] && reservations[key].length){
      const wrap = document.createElement('div'); wrap.className='multi-reservations';
      reservations[key].forEach(r=>{
        const lbl = document.createElement('div'); lbl.className='reservation-label';
        const color = (users[r.user] && users[r.user].color) ? users[r.user].color : '#777';
        lbl.style.background = color;
        lbl.textContent = (r.period === 'dia' ? 'Dia todo' : r.period) + (r.place ? ' ‚Ä¢ ' + r.place : '');
        wrap.appendChild(lbl);
      });
      dayDiv.appendChild(wrap);
    } else {
      const hint = document.createElement('div'); hint.className='muted'; hint.style.marginTop='8px'; hint.textContent='Sem Visita';
      dayDiv.appendChild(hint);
    }

    dayDiv.addEventListener('click', ()=> openReservationModal(dateObj));
    grid.appendChild(dayDiv);
  }
}

/* Month nav */
document.getElementById('prevMonth').addEventListener('click', ()=>{ viewDate.setMonth(viewDate.getMonth()-1); renderCalendar(); });
document.getElementById('nextMonth').addEventListener('click', ()=>{ viewDate.setMonth(viewDate.getMonth()+1); renderCalendar(); });

/* Create user */
document.getElementById('addUserBtn').addEventListener('click', async ()=>{
  const name = (document.getElementById('newUserName').value||'').trim();
  const color = document.getElementById('newUserColor').value || '#ff7a00';
  if(!name) return alert('Digite o nome do usu√°rio');
  if(users[name]) return alert('Usu√°rio j√° existe');
  try {
    await db.collection('users').doc(name).set({ color });
    document.getElementById('newUserName').value = '';
    alert('Usu√°rio cadastrado');
  } catch(e){ alert('Erro: ' + e.message); }
});

/* Create place */
document.getElementById('addPlaceBtn').addEventListener('click', async ()=>{
  const name = (document.getElementById('newPlaceName').value||'').trim();
  if(!name) return alert('Digite o nome do local');
  if(places[name]) return alert('Ag√™ncia j√° cadastrada');
  try {
    await db.collection('places').doc(name).set({});
    document.getElementById('newPlaceName').value = '';
    alert('Ag√™ncia cadastrada');
  } catch(e){ alert('Erro: '+e.message); }
});

/* Manage modals */
document.getElementById('manageUsersBtn').addEventListener('click', ()=> openManageUsers());
document.getElementById('closeManageUsers').addEventListener('click', ()=> manageUsersModal.style.display='none');
document.getElementById('managePlacesBtn').addEventListener('click', ()=> openManagePlaces());
document.getElementById('closeManagePlaces').addEventListener('click', ()=> managePlacesModal.style.display='none');

function openManageUsers(){
  const box = document.getElementById('manageUsersList');
  box.innerHTML = '';
  Object.keys(users).forEach(name=>{
    const row = document.createElement('div'); row.className='list-row';
    const left = document.createElement('div'); left.style.display='flex'; left.style.alignItems='center'; left.style.gap='8px';
    const colorBox = document.createElement('div'); colorBox.className='color-box'; colorBox.style.background = users[name].color;
    const nm = document.createElement('div'); nm.textContent = name; nm.style.fontWeight='700';
    left.appendChild(colorBox); left.appendChild(nm);
    const right = document.createElement('div');
    const editBtn = document.createElement('button'); editBtn.className='icon-btn'; editBtn.textContent='‚úé';
    editBtn.onclick = async ()=> {
      const nn = prompt('Novo nome do usu√°rio', name);
      if(!nn) return;
      const cc = prompt('Cor (hex)', users[name].color) || users[name].color;
      const newName = nn.trim();
      try {
        await db.collection('users').doc(newName).set({ color: cc });
        // update reservations where user == name
        const snap = await db.collection('reservations').get();
        for(const d of snap.docs){
          const items = d.data().items || [];
          const changed = items.map(it => it.user === name ? {...it, user: newName} : it);
          if(JSON.stringify(changed) !== JSON.stringify(items)){
            await db.collection('reservations').doc(d.id).set({ items: changed });
          }
        }
        await db.collection('users').doc(name).delete();
        alert('Usu√°rio renomeado');
      } catch(e){ alert('Erro: '+e.message); }
    };
    const delBtn = document.createElement('button'); delBtn.className='icon-btn'; delBtn.textContent='üóë';
    delBtn.onclick = async ()=> {
      if(!confirm(`Excluir usu√°rio '${name}' ? Isso remover√° tamb√©m das reservas.`)) return;
      try {
        const snap = await db.collection('reservations').get();
        for(const d of snap.docs){
          const items = d.data().items || [];
          const filtered = items.filter(r => r.user !== name);
          if(filtered.length !== items.length){
            if(filtered.length === 0) {
              await db.collection('reservations').doc(d.id).delete();
            } else {
              await db.collection('reservations').doc(d.id).set({ items: filtered });
            }
          }
        }
        await db.collection('users').doc(name).delete();
        alert('Usu√°rio exclu√≠do');
      } catch(e){ alert('Erro: '+e.message); }
    };
    right.appendChild(editBtn); right.appendChild(delBtn);
    row.appendChild(left); row.appendChild(right);
    box.appendChild(row);
  });
  manageUsersModal.style.display = 'flex';
}

function openManagePlaces(){
  const box = document.getElementById('managePlacesList');
  box.innerHTML = '';
  Object.keys(places).forEach(name=>{
    const row = document.createElement('div'); row.className='list-row';
    const left = document.createElement('div'); left.textContent = name; left.style.fontWeight='700';
    const right = document.createElement('div');
    const editBtn = document.createElement('button'); editBtn.className='icon-btn'; editBtn.textContent='‚úé';
    editBtn.onclick = async ()=> {
      const nn = prompt('Novo nome do local', name);
      if(!nn) return;
      const newName = nn.trim();
      try {
        await db.collection('places').doc(newName).set({});
        const snap = await db.collection('reservations').get();
        for(const d of snap.docs){
          const items = d.data().items || [];
          const changed = items.map(it => it.place === name ? {...it, place: newName} : it);
          if(JSON.stringify(changed) !== JSON.stringify(items)){
            await db.collection('reservations').doc(d.id).set({ items: changed });
          }
        }
        await db.collection('places').doc(name).delete();
        alert('Local renomeado');
      } catch(e){ alert('Erro: '+e.message); }
    };
    const delBtn = document.createElement('button'); delBtn.className='icon-btn'; delBtn.textContent='üóë';
    delBtn.onclick = async ()=> {
      if(!confirm(`Excluir Ag√™ncia '${name}' ? Isso remover√° tamb√©m das reservas.`)) return;
      try {
        const snap = await db.collection('reservations').get();
        for(const d of snap.docs){
          const items = d.data().items || [];
          const filtered = items.filter(r => r.place !== name);
          if(filtered.length !== items.length){
            if(filtered.length === 0) {
              await db.collection('reservations').doc(d.id).delete();
            } else {
              await db.collection('reservations').doc(d.id).set({ items: filtered });
            }
          }
        }
        await db.collection('places').doc(name).delete();
        alert('Local exclu√≠do');
      } catch(e){ alert('Erro: '+e.message); }
    };
    right.appendChild(editBtn); right.appendChild(delBtn);
    row.appendChild(left); row.appendChild(right);
    box.appendChild(row);
  });
  managePlacesModal.style.display = 'flex';
}

/* Reservation modal logic */
function openReservationModal(dateObj){
  selectedDayKey = formatKey(dateObj);
  editingResId = null;
  document.getElementById('modalDateTitle').textContent = dateObj.toLocaleDateString();
  modalBg.style.display = 'flex';

  // populate selects FROM CACHE
  modalUserSelect.innerHTML = '';
  Object.keys(users).forEach(u=>{
    const o = document.createElement('option'); o.value = u; o.textContent = u; modalUserSelect.appendChild(o);
  });
  modalPlaceSelect.innerHTML = '';
  Object.keys(places).forEach(p=>{
    const o = document.createElement('option'); o.value = p; o.textContent = p; modalPlaceSelect.appendChild(o);
  });

  // existing reservations
  existingBox.innerHTML = '<div style="font-weight:700;margin-top:12px">Reservas neste dia</div>';
  const dayList = reservations[selectedDayKey] || [];
  if(dayList.length === 0){
    const none = document.createElement('div'); none.className='muted'; none.style.marginTop='6px'; none.textContent='Nenhuma reserva';
    existingBox.appendChild(none);
    document.getElementById('deleteResBtn').style.display = 'none';
  } else {
    dayList.forEach(r=>{
      const row = document.createElement('div'); row.style.display='flex'; row.style.justifyContent='space-between'; row.style.alignItems='center'; row.style.marginTop='6px';
      const info = document.createElement('div'); info.textContent = `${r.period} ‚Ä¢ ${r.place} ‚Ä¢ ${r.user}`;
      const actions = document.createElement('div');
      const editBtn = document.createElement('button'); editBtn.className='icon-btn'; editBtn.textContent='‚úé';
      editBtn.onclick = (e)=>{ e.stopPropagation(); openEditReservation(r.id); };
      const delBtn = document.createElement('button'); delBtn.className='icon-btn'; delBtn.textContent='üóë';
      delBtn.onclick = async (e)=>{ e.stopPropagation(); if(!confirm('Excluir esta reserva?')) return; try { const filtered = (reservations[selectedDayKey]||[]).filter(x=>x.id!==r.id); if(filtered.length===0) await db.collection('reservations').doc(selectedDayKey).delete(); else await db.collection('reservations').doc(selectedDayKey).set({ items: filtered }); alert('Reserva exclu√≠da'); } catch(err){ alert('Erro: '+err.message); } finally { modalBg.style.display='none'; } };
      actions.appendChild(editBtn); actions.appendChild(delBtn);
      row.appendChild(info); row.appendChild(actions);
      existingBox.appendChild(row);
    });
    document.getElementById('deleteResBtn').style.display = 'none';
  }

  // reset form
  document.querySelectorAll('input[name="period"]').forEach(i=>i.checked=false);
  document.getElementById('timeBox').style.display = 'none';
  document.getElementById('timeStart').value=''; document.getElementById('timeEnd').value='';
}

function openEditReservation(resId){
  const dayList = reservations[selectedDayKey] || [];
  const r = dayList.find(x=>x.id === resId);
  if(!r) return;
  editingResId = resId;
  modalUserSelect.value = r.user;
  modalPlaceSelect.value = r.place;
  if(r.period === 'dia' || r.period === 'manha' || r.period === 'tarde'){
    const val = (r.period === 'manh√£' ? 'manha' : r.period);
    const el = document.querySelector(`input[name="period"][value="${val}"]`);
    if(el) el.checked = true;
    document.getElementById('timeBox').style.display = 'none';
  } else {
    const el = document.querySelector('input[name="period"][value="horario"]');
    if(el) el.checked = true;
    document.getElementById('timeBox').style.display = 'block';
    const [s,e] = r.period.split('-');
    document.getElementById('timeStart').value = s;
    document.getElementById('timeEnd').value = e;
  }
  document.getElementById('deleteResBtn').style.display = 'inline-block';
}

/* show/hide time inputs */
document.querySelectorAll('input[name="period"]').forEach(r=>{
  r.addEventListener('change', ()=> document.getElementById('timeBox').style.display = (r.value === 'horario' ? 'block' : 'none'));
});

/* save reservation */
document.getElementById('saveResBtn').addEventListener('click', async ()=>{
  const user = modalUserSelect.value;
  const place = modalPlaceSelect.value;
  const periodRadio = document.querySelector('input[name="period"]:checked');
  if(!user) return alert('Selecione um usu√°rio');
  if(!place) return alert('Selecione um local');
  if(!periodRadio) return alert('Selecione um per√≠odo');

  let period = periodRadio.value;
  if(period === 'horario'){
    const s = document.getElementById('timeStart').value;
    const e = document.getElementById('timeEnd').value;
    if(!s || !e || s >= e) return alert('Intervalo inv√°lido');
    period = `${s}-${e}`;
  }

  try {
    const docRef = db.collection('reservations').doc(selectedDayKey);
    const snapshot = await docRef.get();
    let items = snapshot.exists ? (snapshot.data().items || []) : [];

    if(editingResId){
      items = items.map(r => r.id === editingResId ? {...r, user, place, period} : r);
    } else {
      items.push({ id: uid(), user, place, period });
    }

    await docRef.set({ items });
    alert('Reserva salva');
    modalBg.style.display = 'none';
  } catch(e){ alert('Erro ao salvar reserva: ' + e.message); }
});

/* delete editing reservation (button) */
document.getElementById('deleteResBtn').addEventListener('click', async ()=>{
  if(!editingResId) return;
  try {
    const docRef = db.collection('reservations').doc(selectedDayKey);
    const snapshot = await docRef.get();
    let items = snapshot.exists ? (snapshot.data().items || []) : [];
    items = items.filter(r => r.id !== editingResId);
    if(items.length === 0) {
      await db.collection('reservations').doc(selectedDayKey).delete();
    } else {
      await db.collection('reservations').doc(selectedDayKey).set({ items });
    }
    alert('Reserva exclu√≠da');
    modalBg.style.display = 'none';
  } catch(e){ alert('Erro ao excluir: ' + e.message); }
});

/* close handlers */
document.getElementById('cancelResBtn').addEventListener('click', ()=> modalBg.style.display='none');
document.getElementById('closeModal').addEventListener('click', ()=> modalBg.style.display='none');
document.getElementById('closeManageUsers').addEventListener('click', ()=> manageUsersModal.style.display='none');
document.getElementById('closeManagePlaces').addEventListener('click', ()=> managePlacesModal.style.display='none');

/* initial render (will be updated by snapshots) */
renderCalendar();
</script>
</body>
</html>
